("module-metadata" => ("icon" => "lighting" "description" => "Amazon Alexa") "@endpoint" => (function (context json) (local response type locale text intent intent_func) (set message (parse json "format" => "json")) (set type message/request/type) (set locale message/request/locale) (if (not (has MESSAGES locale)) (set locale "en-US")) (cond (when (= type "LaunchRequest") (set text (get (get MESSAGES locale) "ready"))) (when (= type "IntentRequest") (set intent message/request/intent) (set intent_func (get intents intent/name)) (set text (call intent_func intent locale))) (when true (set text (get (get MESSAGES locale) "unsupported")))) (set context/response-headers ("content-type" => "application/json")) (set response (list "version" => "1.0" "response" => (list "outputSpeech" => (list "type" => "PlainText" "text" => text)))) (string response "format" => "json")) "intents" => ("sum" => (function (intent locale) (local number_a number_b) (set number_a (number intent/slots/number_a/value)) (set number_b (number intent/slots/number_b/value)) (concat (get (get MESSAGES locale) "sum") (+ number_a number_b))) "open_door" => (function (intent locale) (open_door) (get (get MESSAGES locale) "open_door"))) "MESSAGES" => ("en-US" => ("ready" => "I am ready." "error" => "I do not undestand." "sum" => "The result of the operation is " "open_door" => "Door opened." "unsupported" => "I don't know how to do ") "es-ES" => ("ready" => "Estoy listo." "error" => "No lo entiendo." "sum" => "El resultado de la operaciÃ³n es " "open_door" => "Puerta abierta." "unsupported" => "No se como hacer ")))